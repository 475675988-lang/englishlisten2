
<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>精听练习：parc.mp3</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background-color: #f2f2f7; margin: 0; padding: 0; display: flex; flex-direction: column; height: 100vh; }
        .controls { background-color: #ffffff; padding: 15px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); z-index: 10; }
        audio { width: 100%; margin-top: 5px; }
        .file-info { font-size: 14px; color: #555; margin-bottom: 5px; padding: 0 15px; }
        #list-container { flex: 1; overflow-y: auto; padding: 10px 15px; -webkit-overflow-scrolling: touch; }
        .sentence { background-color: white; padding: 15px; margin-bottom: 10px; border-radius: 10px; font-size: 18px; line-height: 1.5; cursor: pointer; border-left: 5px solid transparent; box-shadow: 0 1px 3px rgba(0,0,0,0.05); transition: all 0.2s; }
        .sentence:active { background-color: #e5e5ea; }
        .sentence.active { background-color: #ebf3ff; border-left: 5px solid #007AFF; color: #007AFF; font-weight: bold; }
        .time-tag { font-size: 12px; color: #8e8e93; margin-bottom: 4px; display: block; }
        #loading-msg { text-align: center; padding: 50px 20px; font-size: 18px; color: #007AFF; font-weight: bold; display: flex; flex-direction: column; align-items: center; }
        .spinner { border: 4px solid #f3f3f3; border-top: 4px solid #007AFF; border-radius: 50%; width: 30px; height: 30px; animation: spin 2s linear infinite; margin-bottom: 15px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        #progressBarContainer { width: 80%; height: 12px; background-color: #e5e5ea; border-radius: 6px; overflow: hidden; margin-top: 15px; }
        #progressBarFill { height: 100%; width: 0%; background-color: #34c759; transition: width 0.1s linear; }
        #progressText { font-size: 14px; color: #007AFF; margin-top: 5px; }
    </style>
</head>
<body onload="initPlayer()">
    <div class="controls">
        <audio id="player" controls src="parc.mp3" preload="auto"></audio>
        <div class="file-info">
            音频: parc.mp3 | 共 <span id="sentenceCount">0</span> 句
        </div>
    </div>
    <div id="loading-msg">
        <div class="spinner"></div>
        音频预下载中...
        <div id="progressBarContainer"><div id="progressBarFill"></div></div>
        <div id="progressText">0%</div>
    </div>
    <div id="list-container" style="display:none;"></div>
    <script>
        const player = document.getElementById('player');
        const listContainer = document.getElementById('list-container');
        const loadingMsg = document.getElementById('loading-msg');
        const progressBarFill = document.getElementById('progressBarFill');
        const progressText = document.getElementById('progressText');
        let stopTimer = null;
        const sentences = [
    {
        "start": 24.67,
        "end": 91.58,
        "text": "听力考试正式开始。 Listen to the next question."
    },
    {
        "start": 91.58,
        "end": 94.98,
        "text": "When does the Shopney Your School open?"
    },
    {
        "start": 95.49,
        "end": 108.44,
        "text": "It opens at 8 a.m. from Monday to Friday, but at weekends it opens at 8.30 a.m. When does the Shopney Your School open?"
    },
    {
        "start": 108.93,
        "end": 124.321,
        "text": "It opens at 8 a.m. from Monday to Friday, but at weekends it opens at 8.30 a.m. Listen to the next question."
    },
    {
        "start": 124.321,
        "end": 128.7,
        "text": "The little cat made a sound like a whisper last night."
    },
    {
        "start": 128.72,
        "end": 131.1,
        "text": "What happened to it?"
    },
    {
        "start": 131.24,
        "end": 134.14,
        "text": "I think it felt a little sick."
    },
    {
        "start": 135.16,
        "end": 139.72,
        "text": "The little cat made a sound like a whisper last night."
    },
    {
        "start": 139.84,
        "end": 142.12,
        "text": "What happened to it?"
    },
    {
        "start": 142.3,
        "end": 145.2,
        "text": "I think it felt a little sick."
    },
    {
        "start": 150.62,
        "end": 153.18,
        "text": "Listen to the next question."
    },
    {
        "start": 153.18,
        "end": 155.14,
        "text": "How much are the things?"
    },
    {
        "start": 155.26,
        "end": 160.36,
        "text": "The blue tie is 25 yuan and the black socks are 30 yuan."
    },
    {
        "start": 160.56,
        "end": 162.7,
        "text": "How much are the things?"
    },
    {
        "start": 163.02,
        "end": 167.94,
        "text": "The blue tie is 25 yuan and the black socks are 30 yuan."
    },
    {
        "start": 173.82,
        "end": 176.04,
        "text": "Listen to the next question."
    },
    {
        "start": 176.04,
        "end": 179.5,
        "text": "Sarah, do you like playing basketball?"
    },
    {
        "start": 179.56,
        "end": 186.3,
        "text": "No, it's difficult for me, but my brother likes playing it and he is good at it."
    },
    {
        "start": 187.43,
        "end": 190.83,
        "text": "Sarah, do you like playing basketball?"
    },
    {
        "start": 190.83,
        "end": 197.67,
        "text": "No, it's difficult for me, but my brother likes playing it and he is good at it."
    },
    {
        "start": 202.88,
        "end": 205.381,
        "text": "Listen to the next question."
    },
    {
        "start": 205.381,
        "end": 207.44,
        "text": "Here is a nice photo."
    },
    {
        "start": 207.44,
        "end": 210.78,
        "text": "Is the boy with black hair your brother, Jane?"
    },
    {
        "start": 210.86,
        "end": 212.48,
        "text": "No, he isn't."
    },
    {
        "start": 212.48,
        "end": 216.9,
        "text": "My brother has brown hair and he doesn't wear glasses."
    },
    {
        "start": 218.22,
        "end": 220.38,
        "text": "Here is a nice photo."
    },
    {
        "start": 220.38,
        "end": 223.72,
        "text": "Is the boy with black hair your brother, Jane?"
    },
    {
        "start": 223.74,
        "end": 225.44,
        "text": "No, he isn't."
    },
    {
        "start": 225.44,
        "end": 229.84,
        "text": "My brother has brown hair and he doesn't wear glasses."
    },
    {
        "start": 234.64,
        "end": 237.74,
        "text": "Listen to the next question."
    },
    {
        "start": 239.5,
        "end": 240.94,
        "text": "Good evening."
    },
    {
        "start": 240.94,
        "end": 242.94,
        "text": "May I take your order?"
    },
    {
        "start": 243.74,
        "end": 244.8,
        "text": "Yes."
    },
    {
        "start": 244.8,
        "end": 247.24,
        "text": "What kind of noodles do you have?"
    },
    {
        "start": 247.76,
        "end": 252.6,
        "text": "We have beef noodles, mutton noodles and chicken noodles."
    },
    {
        "start": 253.1,
        "end": 256.861,
        "text": "Are there any vegetables in the beef noodles?"
    },
    {
        "start": 257.34,
        "end": 258.42,
        "text": "Yes."
    },
    {
        "start": 258.42,
        "end": 260.32,
        "text": "There are some potatoes."
    },
    {
        "start": 261.04,
        "end": 262.18,
        "text": "Okay."
    },
    {
        "start": 262.18,
        "end": 264.16,
        "text": "I'd like beef noodles."
    },
    {
        "start": 264.78,
        "end": 266.0,
        "text": "Sure."
    },
    {
        "start": 266.0,
        "end": 268.4,
        "text": "What size would you like?"
    },
    {
        "start": 269.16,
        "end": 270.82,
        "text": "Large, please."
    },
    {
        "start": 270.82,
        "end": 275.08,
        "text": "And do you have any drinks? Of course."
    },
    {
        "start": 275.08,
        "end": 278.52,
        "text": "We have tea, milk and orange juice."
    },
    {
        "start": 279.02,
        "end": 281.32,
        "text": "Orange juice, please."
    },
    {
        "start": 281.84,
        "end": 283.22,
        "text": "Okay."
    },
    {
        "start": 283.22,
        "end": 287.94,
        "text": "One large bowl of beef noodles and an orange juice."
    },
    {
        "start": 288.32,
        "end": 290.22,
        "text": "How much are they?"
    },
    {
        "start": 290.5,
        "end": 296.8,
        "text": "A large bowl of beef noodles is ten dollars and the orange juice is four dollars."
    },
    {
        "start": 297.44,
        "end": 298.56,
        "text": "Okay."
    },
    {
        "start": 298.56,
        "end": 301.8,
        "text": "Thanks a lot. You're welcome."
    },
    {
        "start": 304.62,
        "end": 306.04,
        "text": "Good evening."
    },
    {
        "start": 306.04,
        "end": 307.521,
        "text": "May I take your order?"
    },
    {
        "start": 307.521,
        "end": 308.9,
        "text": "I take your order."
    },
    {
        "start": 308.9,
        "end": 309.9,
        "text": "Yes."
    },
    {
        "start": 309.9,
        "end": 312.32,
        "text": "What kind of noodles do you have?"
    },
    {
        "start": 312.54,
        "end": 317.72,
        "text": "We have beef noodles, mutton noodles and chicken noodles."
    },
    {
        "start": 318.18,
        "end": 321.961,
        "text": "Are there any vegetables in the beef noodles?"
    },
    {
        "start": 322.38,
        "end": 323.52,
        "text": "Yes."
    },
    {
        "start": 323.52,
        "end": 325.42,
        "text": "There are some potatoes."
    },
    {
        "start": 326.1,
        "end": 327.08,
        "text": "Okay."
    },
    {
        "start": 327.08,
        "end": 329.26,
        "text": "I'd like beef noodles."
    },
    {
        "start": 329.8,
        "end": 331.06,
        "text": "Sure."
    },
    {
        "start": 331.06,
        "end": 333.5,
        "text": "What size would you like?"
    },
    {
        "start": 334.2,
        "end": 335.96,
        "text": "Large, please."
    },
    {
        "start": 335.96,
        "end": 340.18,
        "text": "And do you have any drinks? Of course."
    },
    {
        "start": 340.18,
        "end": 343.62,
        "text": "We have tea, milk and orange juice."
    },
    {
        "start": 344.08,
        "end": 346.42,
        "text": "Orange juice, please."
    },
    {
        "start": 346.84,
        "end": 348.34,
        "text": "Okay."
    },
    {
        "start": 348.6,
        "end": 348.821,
        "text": "Okay."
    },
    {
        "start": 348.821,
        "end": 353.02,
        "text": "One large bowl of beef noodles and an orange juice."
    },
    {
        "start": 353.42,
        "end": 355.32,
        "text": "How much are they?"
    },
    {
        "start": 355.8,
        "end": 361.88,
        "text": "A large bowl of beef noodles is ten dollars and the orange juice is four dollars."
    },
    {
        "start": 362.5,
        "end": 363.62,
        "text": "Okay."
    },
    {
        "start": 363.62,
        "end": 366.92,
        "text": "Thanks a lot. You're welcome."
    },
    {
        "start": 376.3,
        "end": 378.521,
        "text": "Listen to the next question."
    },
    {
        "start": 378.521,
        "end": 381.18,
        "text": "Hi, I am Jack."
    },
    {
        "start": 381.18,
        "end": 383.5,
        "text": "I like animals very much."
    },
    {
        "start": 383.5,
        "end": 388.48,
        "text": "I often go to the zoo to see animals on Sundays."
    },
    {
        "start": 388.5,
        "end": 391.86,
        "text": "My brother Mike also likes animals."
    },
    {
        "start": 391.86,
        "end": 394.5,
        "text": "So he goes there with me."
    },
    {
        "start": 394.5,
        "end": 402.94,
        "text": "There are many animals in the zoo, such as tigers, elephants, giraffes, bears and many other animals."
    },
    {
        "start": 402.94,
        "end": 404.92,
        "text": "Tigers are very dangerous."
    },
    {
        "start": 404.92,
        "end": 409.68,
        "text": "They usually live alone and catch many kinds of animals for food."
    },
    {
        "start": 409.68,
        "end": 411.78,
        "text": "So I don't like them."
    },
    {
        "start": 411.78,
        "end": 416.88,
        "text": "My brother likes elephants because elephants are tall and strong."
    },
    {
        "start": 416.88,
        "end": 419.66,
        "text": "They can play soccer and draw."
    },
    {
        "start": 419.66,
        "end": 423.301,
        "text": "They can also help people do many things."
    },
    {
        "start": 423.34,
        "end": 429.16,
        "text": "Many people like giraffes because giraffes are beautiful and interesting."
    },
    {
        "start": 429.38,
        "end": 431.68,
        "text": "Zebras are my favorite animals."
    },
    {
        "start": 431.68,
        "end": 433.321,
        "text": "They are very cute."
    },
    {
        "start": 433.321,
        "end": 435.62,
        "text": "They are from Africa."
    },
    {
        "start": 435.62,
        "end": 438.12,
        "text": "They are black and white."
    },
    {
        "start": 443.0,
        "end": 445.14,
        "text": "Hi, I am Jack."
    },
    {
        "start": 445.14,
        "end": 447.44,
        "text": "I like animals very much."
    },
    {
        "start": 447.44,
        "end": 452.42,
        "text": "I often go to the zoo to see animals on Sundays."
    },
    {
        "start": 452.67,
        "end": 455.84,
        "text": "My brother Mike also likes animals."
    },
    {
        "start": 455.84,
        "end": 458.62,
        "text": "So he goes there with me."
    },
    {
        "start": 458.93,
        "end": 466.62,
        "text": "There are many animals in the zoo, such as tigers, elephants, giraffes, bears and many other animals."
    },
    {
        "start": 466.62,
        "end": 469.16,
        "text": "Tigers are very dangerous."
    },
    {
        "start": 469.16,
        "end": 473.64,
        "text": "They usually live alone and catch many kinds of animals for food."
    },
    {
        "start": 473.64,
        "end": 475.68,
        "text": "So I don't like them."
    },
    {
        "start": 475.68,
        "end": 480.74,
        "text": "My brother likes elephants because elephants are tall and strong."
    },
    {
        "start": 480.74,
        "end": 483.6,
        "text": "They can play soccer and draw."
    },
    {
        "start": 483.6,
        "end": 487.16,
        "text": "They can also help people do many things."
    },
    {
        "start": 487.16,
        "end": 493.1,
        "text": "Many people like giraffes because giraffes are beautiful and interesting."
    },
    {
        "start": 493.1,
        "end": 495.66,
        "text": "Zebras are my favorite animals."
    },
    {
        "start": 495.66,
        "end": 497.62,
        "text": "They are very cute."
    },
    {
        "start": 497.62,
        "end": 499.54,
        "text": "They are from Africa."
    },
    {
        "start": 499.54,
        "end": 501.601,
        "text": "They are black and white."
    },
    {
        "start": 501.601,
        "end": 503.101,
        "text": "They are very cute."
    },
    {
        "start": 507.96,
        "end": 512.1,
        "text": "They are very cute. Thank you."
    }
]; 

        function initPlayer() {
            document.getElementById('sentenceCount').innerText = sentences.length;
            player.addEventListener('canplaythrough', audioReady);
            player.addEventListener('progress', updateProgressBar);
            if (player.readyState >= 4) audioReady();
        }

        function updateProgressBar() {
            if (player.duration > 0 && player.buffered.length > 0) {
                const percent = Math.floor((player.buffered.end(player.buffered.length - 1) / player.duration) * 100);
                progressBarFill.style.width = percent + '%';
                progressText.innerText = percent + '%';
            }
        }
        
        function audioReady() {
            player.removeEventListener('canplaythrough', audioReady);
            progressBarFill.style.width = '100%';
            progressText.innerText = '100% - 加载完成！';
            setTimeout(() => {
                loadingMsg.style.display = 'none';
                listContainer.style.display = 'block';
                renderList();
            }, 500);
        }
        
        function renderList() {
            sentences.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = 'sentence';
                div.innerHTML = `<span class="time-tag">${formatTime(item.start)}</span><span>${item.text}</span>`;
                div.onclick = () => playSegment(item.start, item.end, div);
                listContainer.appendChild(div);
            });
        }

        function formatTime(seconds) {
            const m = Math.floor(seconds / 60);
            const s = Math.floor(seconds % 60);
            return (m < 10 ? '0' : '') + m + ':' + (s < 10 ? '0' : '') + s;
        }

        function playSegment(start, end, element) {
            document.querySelectorAll('.sentence').forEach(el => el.classList.remove('active'));
            element.classList.add('active');
            if (stopTimer) clearTimeout(stopTimer);
            player.currentTime = start;
            player.play();
            stopTimer = setTimeout(() => player.pause(), (end - start) * 1000 + 100);
        }
    </script>
</body>
</html>
